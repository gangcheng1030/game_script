package main

import (
	"fmt"

	"github.com/go-vgo/robotgo"
	"github.com/vcaesar/bitmap"
)

func main() {
	bit := robotgo.CaptureScreen(10, 10, 30, 40)
	// use `defer robotgo.FreeBitmap(bit)` to free the bitmap
	defer robotgo.FreeBitmap(bit)

	fmt.Println("bitmap...", bit)
	img := robotgo.ToImage(bit)
	// robotgo.SavePng(img, "test_1.png")
	robotgo.Save(img, "test_1.png")

	bit2 := robotgo.ToCBitmap(robotgo.ImgToBitmap(img))
	fx, fy := bitmap.Find(bit2)
	fmt.Println("FindBitmap------ ", fx, fy)
	robotgo.Move(fx, fy)

	arr := bitmap.FindAll(bit2)
	fmt.Println("Find all bitmap: ", arr)

	fx, fy = bitmap.Find(bit)
	fmt.Println("FindBitmap------ ", fx, fy)

	bitmap.Save(bit, "test.png")
}